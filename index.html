<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ignition Lab | Deloitte Extended Services</title>
    <style>
      /* --- CSS STYLES --- */
      @import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Unbounded:wght@600;700;800&display=swap");

      :root {
        --deloitte-green: #86bc25;
        --dark-bg: #070707;
        --text-color: #ffffff;
        --card-bg: rgba(16, 16, 16, 0.85);
        --muted: #a6a6a6;
        --accent-glow: rgba(134, 188, 37, 0.35);
        --glass: rgba(18, 18, 18, 0.65);
      }

      body {
        margin: 0;
        padding: 0;
        background:
          radial-gradient(
            1200px 500px at 15% -10%,
            rgba(134, 188, 37, 0.22),
            transparent 60%
          ),
          radial-gradient(
            900px 600px at 90% 10%,
            rgba(255, 255, 255, 0.08),
            transparent 65%
          ),
          linear-gradient(160deg, #050505 0%, #0a0a0a 60%, #0d0f0b 100%);
        color: var(--text-color);
        font-family:
          "Space Grotesk", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        overflow: hidden;
        height: 100vh;
        display: flex;
        flex-direction: column; /* Vertical layout */
        align-items: center;
      }

      #bg-canvas {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 0;
        width: 100%;
        height: 100%;
      }

      /* --- PERSISTENT HEADER (ALWAYS VISIBLE) --- */
      .global-header {
        z-index: 50;
        text-align: center;
        margin-top: 3vh;
        height: 15vh; /* Fixed height for header */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center; /* Ensure centering */
        gap: 8px;
      }

      /* New container to hold title and rocket side-by-side */
      .title-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px; /* Space between text and rocket */
      }

      .event-title {
        font-family: "Unbounded", "Space Grotesk", sans-serif;
        font-size: 4.1rem;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 4px;
        margin: 0;
        background: linear-gradient(90deg, #fff, var(--deloitte-green));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 40px var(--accent-glow);
      }

      /* New styles for the rocket icon */
      .title-icon {
        height: 4.2rem; /* Match roughly the font size */
        width: auto;
        filter: drop-shadow(
          0 0 15px rgba(134, 188, 37, 0.6)
        ); /* Adds a green glow */
      }

      .event-subtitle {
        font-size: 1.15rem;
        font-weight: 400;
        margin: 0;
        color: var(--muted);
        letter-spacing: 1px;
        display: inline-flex;
        gap: 12px;
        align-items: center;
      }

      .event-subtitle span {
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--deloitte-green);
        box-shadow: 0 0 12px var(--accent-glow);
      }

      .meta-row {
        margin-top: 6px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .pill {
        border: 1px solid rgba(134, 188, 37, 0.4);
        background: rgba(134, 188, 37, 0.08);
        color: #e3f2c4;
        padding: 6px 14px;
        border-radius: 999px;
        font-size: 0.9rem;
        letter-spacing: 1px;
        text-transform: uppercase;
      }

      /* --- ROTATING CONTENT CONTAINER --- */
      .content-container {
        position: relative;
        z-index: 10;
        width: 90vw;
        height: 71vh; /* Occupy remaining space */
        margin-top: 4vh; /* Add breathing room under header pills */
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* Slide Transition Logic */
      .slide {
        position: absolute;
        opacity: 0;
        transition:
          opacity 1s ease-in-out,
          transform 1s ease;
        transform: translateY(15px) scale(0.98);
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        pointer-events: none;
      }

      .slide.active {
        opacity: 1;
        transform: translateY(0) scale(1);
        pointer-events: auto;
      }

      /* --- SLIDE 1: COUNTDOWN & DESC --- */
      .hero-grid {
        width: 90%;
        max-width: 1400px;
        display: grid;
        grid-template-columns: 3fr 2fr;
        gap: 50px;
        align-items: center;
      }

      .hero-left {
        width: 100%;
      }

      .hero-right {
        width: 100%;
        max-width: 520px;
        justify-self: end;
      }

      .event-desc {
        font-size: 2rem;
        max-width: 100%;
        margin: 0 0 28px 0;
        line-height: 1.6;
        color: #f0f0f0;
        text-align: left;
      }

      .highlight {
        color: var(--deloitte-green);
        text-shadow: 0 0 25px rgba(134, 188, 37, 0.25);
      }

      .callout {
        background: var(--glass);
        border: 1px solid rgba(134, 188, 37, 0.35);
        padding: 18px 22px;
        border-radius: 14px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-size: 0.95rem;
        color: #dfecc2;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35);
      }

      .callout strong {
        font-size: 1.2rem;
        color: #ffffff;
      }

      .countdown-container {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
        align-items: flex-end;
        flex-wrap: nowrap;
      }

      .time-box {
        background: var(--glass);
        padding: 18px 20px;
        border-radius: 15px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        min-width: 90px;
        box-shadow: 0 10px 35px rgba(0, 0, 0, 0.45);
      }

      .time-value {
        font-size: 3.8rem;
        font-weight: 700;
        color: var(--deloitte-green);
        display: block;
        line-height: 1;
      }

      .time-label {
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1.6px;
        color: var(--muted);
        margin-top: 10px;
        display: block;
      }

      .time-box.small {
        padding: 10px 12px;
        min-width: 60px;
      }

      .time-box.small .time-value {
        font-size: 2.2rem;
      }

      .time-box.small .time-label {
        font-size: 0.7rem;
        letter-spacing: 1.2px;
      }

      .stat-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 18px;
        margin-top: 24px;
      }

      .stat-card {
        padding: 18px 20px;
        border-radius: 14px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        text-align: left;
      }

      .stat-card .value {
        font-size: 2rem;
        color: #fff;
        font-weight: 700;
      }

      .stat-card .label {
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        color: var(--muted);
      }

      /* --- SLIDE 2: MOSAIC (ALL TEAMS) --- */
      .mosaic-grid {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        grid-template-rows: repeat(3, 1fr);
        gap: 12px;
        width: 95%;
        height: 90%;
      }

      .mosaic-card {
        grid-column: span 2;
        background: rgba(20, 20, 20, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 10px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        backdrop-filter: blur(5px);
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
        animation: float 8s ease-in-out infinite;
      }

      .mosaic-card:nth-last-child(2):nth-child(7) {
        grid-column: 2 / span 2;
      }

      .mosaic-card:last-child:nth-child(8) {
        grid-column: 4 / span 2;
      }

      .mosaic-card img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        padding: 12px 6px 10px;
        background:
          radial-gradient(
            circle at 50% 35%,
            rgba(134, 188, 37, 0.18),
            transparent 55%
          ),
          linear-gradient(160deg, rgba(255, 255, 255, 0.06), transparent 70%);
        filter: drop-shadow(0 12px 22px rgba(0, 0, 0, 0.6))
          drop-shadow(0 0 18px rgba(134, 188, 37, 0.25));
      }

      .mosaic-card .name {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        font-size: 1rem;
        font-weight: 700;
        color: #fff;
        letter-spacing: 0.6px;
        text-transform: uppercase;
        font-family: "Unbounded", "Space Grotesk", sans-serif;
        padding: 8px 6px;
        text-align: center;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 0) 0%,
          rgba(0, 0, 0, 0.65) 55%,
          rgba(0, 0, 0, 0.85) 100%
        );
      }

      /* --- SLIDE 3: TEAM SPOTLIGHT --- */
      .team-card {
        background: transparent;
        border: none;
        border-radius: 0;
        padding: 0;
        width: 85%;
        height: 75%;
        display: flex;
        flex-direction: row;
        align-items: center;
        box-shadow: none;
        backdrop-filter: none;
      }

      .team-image-container {
        flex: 1;
        height: 100%;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        border-radius: 15px;
        position: relative;
        background:
          radial-gradient(
            380px 240px at 50% 35%,
            rgba(134, 188, 37, 0.2),
            transparent 60%
          ),
          linear-gradient(160deg, #111 0%, #0b0b0b 70%);
        border: 1px solid rgba(255, 255, 255, 0.08);
      }

      .team-image {
        width: 100%;
        height: 100%;
        object-fit: contain;
        object-position: center;
        padding: 0;
        display: block;
      }

      .team-image-container.spotlight-offset {
        padding-top: 25px;
      }

      .team-overlay {
        position: absolute;
        top: 18px;
        left: 0;
        right: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
        text-align: center;
        pointer-events: none;
        text-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
      }

      .team-label {
        color: var(--deloitte-green);
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 2.5px;
        font-weight: 700;
        margin: 0;
      }

      .team-name {
        font-size: 2rem;
        margin: 0;
        line-height: 1.1;
        color: #f2f2f2;
        font-family: "Unbounded", "Space Grotesk", sans-serif;
        letter-spacing: 1px;
        text-transform: uppercase;
      }

      .flow-steps {
        margin-top: 22px;
        display: grid;
        gap: 12px;
      }

      .flow-step {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 12px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        font-size: 1rem;
        color: #d7d7d7;
        letter-spacing: 0.4px;
        text-transform: uppercase;
      }

      .flow-step span {
        width: 30px;
        height: 30px;
        border-radius: 9px;
        background: rgba(134, 188, 37, 0.18);
        border: 1px solid rgba(134, 188, 37, 0.6);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: #eaf7d1;
        font-size: 0.9rem;
        font-weight: 700;
        box-shadow: 0 0 12px rgba(134, 188, 37, 0.25);
      }

      .progress-bar {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 8px;
        background: var(--deloitte-green);
        width: 0%;
        z-index: 100;
      }

      .nav-controls {
        position: absolute;
        bottom: 14px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 120;
        display: flex;
        gap: 10px;
      }

      .nav-controls.is-hidden {
        display: none;
      }

      .nav-btn {
        width: 36px;
        height: 36px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: rgba(255, 255, 255, 0.05);
        color: #ffffff;
        font-size: 1.4rem;
        line-height: 1;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        backdrop-filter: blur(6px);
        transition:
          transform 0.2s ease,
          background 0.2s ease,
          border-color 0.2s ease;
      }

      .nav-btn:hover {
        transform: translateY(-1px);
        background: rgba(134, 188, 37, 0.12);
        border-color: rgba(134, 188, 37, 0.5);
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }

      @media (max-width: 1100px) {
        .hero-grid {
          grid-template-columns: 1fr;
          gap: 30px;
        }
        .hero-right {
          max-width: none;
          justify-self: stretch;
        }
        .event-desc {
          text-align: center;
        }
        .stat-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <canvas id="bg-canvas"></canvas>

    <header class="global-header">
      <div class="title-container">
        <h1 class="event-title">Ignition Lab</h1>
        <img src="./img/rocket.webp" alt="Rocket Icon" class="title-icon" />
      </div>
      <div class="event-subtitle">
        <span><span class="dot"></span>Deloitte Extended Services</span>
        <span>|</span>
        <span>Casablanca</span>
      </div>
      <div class="meta-row">
        <div class="pill">Innovation Sprint</div>
        <div class="pill">8 Teams</div>
        <div class="pill">Demo Day</div>
      </div>
    </header>

    <div class="content-container">
      <div class="slide active" id="main-slide">
        <div class="hero-grid">
          <div class="hero-left">
            <p class="event-desc">
              A sprint of focused invention, rapid prototyping, and bold
              thinking. Eight teams. One mission:
              <span class="highlight">ignite the next wave of innovation.</span>
            </p>
            <div class="callout">
              <span>Countdown to Demo Day</span>
              <strong id="target-label">Target: February 28</strong>
            </div>
            <div class="stat-grid">
              <div class="stat-card">
                <div class="value">30</div>
                <div class="label">Days to Build</div>
              </div>
              <div class="stat-card">
                <div class="value">8</div>
                <div class="label">Teams</div>
              </div>
              <div class="stat-card">
                <div class="value">1</div>
                <div class="label">Breakthrough</div>
              </div>
            </div>
          </div>
          <div class="hero-right">
            <div class="countdown-container">
              <div class="time-box">
                <span class="time-value" id="days">00</span>
                <span class="time-label">Days</span>
              </div>
              <div class="time-box">
                <span class="time-value" id="hours">00</span>
                <span class="time-label">Hours</span>
              </div>
              <div class="time-box small">
                <span class="time-value" id="minutes">00</span>
                <span class="time-label">Minutes</span>
              </div>
              <div class="time-box small">
                <span class="time-value" id="seconds">00</span>
                <span class="time-label">Seconds</span>
              </div>
            </div>
            <div class="flow-steps">
              <div class="flow-step"><span>1</span>Discover the problem</div>
              <div class="flow-step"><span>2</span>Prototype with speed</div>
              <div class="flow-step"><span>3</span>Showcase on Demo Day</div>
            </div>
          </div>
        </div>
      </div>

      <div class="slide" id="mosaic-slide">
        <h2
          style="
            margin: 0 0 20px 0;
            color: var(--deloitte-green);
            text-transform: uppercase;
            font-size: 1.5rem;
            letter-spacing: 2px;
          "
        >
          The Challengers
        </h2>
        <div class="mosaic-grid" id="mosaic-container"></div>
      </div>

      <div class="slide" id="team-slide">
        <div class="team-card">
          <div class="team-image-container">
            <div class="team-overlay">
              <h2 class="team-name" id="team-name">Team Name</h2>
            </div>
            <img src="" alt="Team Photo" class="team-image" id="team-img" />
          </div>
        </div>
      </div>
    </div>

    <div class="progress-bar" id="progress-bar"></div>
    <div class="nav-controls" aria-label="Slide controls">
      <button class="nav-btn" id="nav-prev" aria-label="Previous slide">
        &#x2039;
      </button>
      <button class="nav-btn" id="nav-pause" aria-label="Pause slideshow">
        &#x23F8;
      </button>
      <button class="nav-btn" id="nav-next" aria-label="Next slide">
        &#x203A;
      </button>
    </div>

    <script>
      /* --- CONFIGURATION --- */
      const targetDate = new Date("February 28, 2026 00:00:00").getTime();

      // Durations (ms)
      const MAIN_DURATION = 10000;
      const MOSAIC_DURATION = 8000;
      const SPOTLIGHT_DURATION = 5000;

      // Teams Data
      const teams = [
        {
          name: "Agent Zero",
          imgMosaic: "./img/agent_zero.webp",
          imgSpotlight: "./img/agent_zero.webp",
        },
        {
          name: "Mindra",
          imgMosaic: "./img/mindra.webp",
          imgSpotlight: "./img/mindra.webp",
        },
        {
          name: "omiAI-Tech",
          imgMosaic: "./img/omiai_tech.webp",
          imgSpotlight: "./img/omiai_tech.webp",
        },
        {
          name: "AiShadows",
          imgMosaic: "./img/aishadows.webp",
          imgSpotlight: "./img/aishadows.webp",
        },
        {
          name: "Opptimized Minds",
          imgMosaic: "./img/optimized_minds.webp",
          imgSpotlight: "./img/optimized_minds.webp",
        },
        {
          name: "Cortex",
          imgMosaic: "./img/cortex.webp",
          imgSpotlight: "./img/cortex.webp",
        },
        {
          name: "The Disaster",
          imgMosaic: "./img/disaster.webp",
          imgSpotlight: "./img/disaster.webp",
        },
        {
          name: "CareBytes",
          imgMosaic: "./img/carebytes.webp",
          imgSpotlight: "./img/carebytes.webp",
        },
      ];

      /* --- SETUP --- */
      const mainSlide = document.getElementById("main-slide");
      const mosaicSlide = document.getElementById("mosaic-slide");
      const teamSlide = document.getElementById("team-slide");
      const progressBar = document.getElementById("progress-bar");
      const prevBtn = document.getElementById("nav-prev");
      const pauseBtn = document.getElementById("nav-pause");
      const nextBtn = document.getElementById("nav-next");
      const navControls = document.querySelector(".nav-controls");

      const teamNameEl = document.getElementById("team-name");
      const teamImgEl = document.getElementById("team-img");
      const teamImageContainer = document.querySelector(
        ".team-image-container",
      );
      const targetLabelEl = document.getElementById("target-label");

      const targetLabel = new Date(targetDate).toLocaleDateString("en-US", {
        month: "long",
        day: "numeric",
      });
      targetLabelEl.innerText = `Target: ${targetLabel}`;

      // Populate Mosaic
      const mosaicContainer = document.getElementById("mosaic-container");
      teams.forEach((team) => {
        const div = document.createElement("div");
        div.className = "mosaic-card";
        div.innerHTML = `
                <img src="${team.imgMosaic}" alt="${team.name}">
                <div class="name">${team.name}</div>
            `;
        mosaicContainer.appendChild(div);
      });

      /* --- LOGIC --- */
      let currentTeamIndex = 0;
      let state = 1; // 0=Main, 1=Mosaic, 2=Spotlight
      let spotlightShown = 0;
      let currentView = "main";
      let timerId = null;
      let isPaused = false;
      let progressStartTime = 0;
      let progressDuration = 0;
      let remainingTime = 0;

      function updateCountdown() {
        const now = new Date().getTime();
        const distance = targetDate - now;
        if (distance < 0) return;
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor(
          (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60),
        );
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        document.getElementById("days").innerText =
          days < 10 ? "0" + days : days;
        document.getElementById("hours").innerText =
          hours < 10 ? "0" + hours : hours;
        document.getElementById("minutes").innerText =
          minutes < 10 ? "0" + minutes : minutes;
        document.getElementById("seconds").innerText =
          seconds < 10 ? "0" + seconds : seconds;
      }
      setInterval(updateCountdown, 1000);
      updateCountdown();

      function setActive(view) {
        currentView = view;
        mainSlide.classList.remove("active");
        mosaicSlide.classList.remove("active");
        teamSlide.classList.remove("active");
        if (view === "main") mainSlide.classList.add("active");
        if (view === "mosaic") mosaicSlide.classList.add("active");
        if (view === "spotlight") teamSlide.classList.add("active");
      }

      function resetTimer(duration) {
        progressBar.style.transition = "none";
        progressBar.style.width = "0%";
        void progressBar.offsetWidth;
        progressStartTime = Date.now();
        progressDuration = duration;
        remainingTime = duration;
        if (isPaused) return;
        progressBar.style.transition = `width ${duration}ms linear`;
        progressBar.style.width = "100%";
        if (timerId) clearTimeout(timerId);
        timerId = setTimeout(switchSlide, duration);
      }

      function pauseSlideshow() {
        if (timerId) clearTimeout(timerId);
        const elapsed = Math.min(Date.now() - progressStartTime, progressDuration);
        remainingTime = Math.max(progressDuration - elapsed, 0);
        const width = progressDuration
          ? `${(elapsed / progressDuration) * 100}%`
          : "0%";
        progressBar.style.transition = "none";
        progressBar.style.width = width;
        isPaused = true;
        pauseBtn.innerHTML = "&#x25B6;";
        pauseBtn.setAttribute("aria-label", "Resume slideshow");
      }

      function resumeSlideshow() {
        if (!isPaused) return;
        progressStartTime = Date.now();
        progressDuration = remainingTime;
        progressBar.style.transition = `width ${remainingTime}ms linear`;
        progressBar.style.width = "100%";
        if (timerId) clearTimeout(timerId);
        timerId = setTimeout(switchSlide, remainingTime);
        isPaused = false;
        pauseBtn.innerHTML = "&#x23F8;";
        pauseBtn.setAttribute("aria-label", "Pause slideshow");
      }

      function togglePause() {
        if (isPaused) {
          resumeSlideshow();
        } else {
          pauseSlideshow();
        }
      }

      function showMain() {
        setActive("main");
        resetTimer(MAIN_DURATION);
        state = 1;
      }

      function showMosaic() {
        setActive("mosaic");
        resetTimer(MOSAIC_DURATION);
        state = 2;
      }

      function showSpotlight(index, options = {}) {
        const { advance = true, spotlightOverride = null } = options;
        const team = teams[index];
        teamNameEl.innerText = team.name;
        teamImgEl.src = team.imgSpotlight;
        teamImageContainer.classList.toggle(
          "spotlight-offset",
          team.name === "omiAI-Tech",
        );
        setActive("spotlight");
        resetTimer(SPOTLIGHT_DURATION);

        if (spotlightOverride !== null) {
          spotlightShown = spotlightOverride;
        }

        currentTeamIndex = (index + 1) % teams.length;

        if (advance) {
          spotlightShown += 1;
          if (spotlightShown >= teams.length) {
            spotlightShown = 0;
            state = 0;
          } else {
            state = 2;
          }
        } else {
          state = 2;
        }
      }

      function switchSlide() {
        if (state === 0) {
          showMain();
        } else if (state === 1) {
          showMosaic();
        } else {
          showSpotlight(currentTeamIndex, { advance: true });
        }
      }

      function goNext() {
        if (currentView === "main") {
          showMosaic();
        } else if (currentView === "mosaic") {
          showSpotlight(currentTeamIndex, { advance: true });
        } else {
          if (state === 0) {
            showMain();
          } else {
            showSpotlight(currentTeamIndex, { advance: true });
          }
        }
      }

      function goPrev() {
        const len = teams.length;
        if (currentView === "main") {
          const prevIndex = (currentTeamIndex - 1 + len) % len;
          showSpotlight(prevIndex, {
            advance: false,
            spotlightOverride: len - 1,
          });
        } else if (currentView === "mosaic") {
          showMain();
        } else {
          if (spotlightShown <= 1) {
            showMosaic();
            return;
          }
          const prevIndex = (currentTeamIndex - 2 + len) % len;
          const newShown = spotlightShown - 1;
          showSpotlight(prevIndex, {
            advance: false,
            spotlightOverride: newShown,
          });
        }
      }

      const SHOW_CONTROLS = false;
      if (!SHOW_CONTROLS) navControls.classList.add("is-hidden");

      prevBtn.addEventListener("click", goPrev);
      pauseBtn.addEventListener("click", togglePause);
      nextBtn.addEventListener("click", goNext);
      window.addEventListener("keydown", (event) => {
        if (event.key === "ArrowLeft") {
          event.preventDefault();
          goPrev();
        } else if (event.key === "ArrowRight") {
          event.preventDefault();
          goNext();
        } else if (event.code === "Space") {
          event.preventDefault();
          togglePause();
        }
      });

      resetTimer(MAIN_DURATION);

      /* --- BG ANIMATION (UPDATED VISIBILITY) --- */
      const canvas = document.getElementById("bg-canvas");
      const ctx = canvas.getContext("2d");
      let width,
        height,
        particles = [];

      function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resize);
      resize();

      class Particle {
        constructor() {
          this.x = Math.random() * width;
          this.y = Math.random() * height;
          this.vx = (Math.random() - 0.5) * 0.5;
          this.vy = (Math.random() - 0.5) * 0.5;
          this.size = Math.random() * 2 + 1;
        }
        update() {
          this.x += this.vx;
          this.y += this.vy;
          if (this.x < 0 || this.x > width) this.vx *= -1;
          if (this.y < 0 || this.y > height) this.vy *= -1;
        }
        draw() {
          // UPDATED: Increased opacity from 0.4 to 0.9 for high visibility
          ctx.fillStyle = "rgba(134, 188, 37, 0.9)";
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      function initParticles() {
        particles = [];
        // Increased particle count slightly for denser effect
        for (let i = 0; i < 70; i++) particles.push(new Particle());
      }

      function animate() {
        ctx.clearRect(0, 0, width, height);
        for (let i = 0; i < particles.length; i++) {
          particles[i].update();
          particles[i].draw();
          for (let j = i; j < particles.length; j++) {
            const dx = particles[i].x - particles[j].x;
            const dy = particles[i].y - particles[j].y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            if (dist < 150) {
              // UPDATED: Increased base opacity from 0.15 to 0.4 for brighter lines
              ctx.strokeStyle = `rgba(134, 188, 37, ${0.4 - dist / 1000})`;
              ctx.lineWidth = 1;
              ctx.beginPath();
              ctx.moveTo(particles[i].x, particles[i].y);
              ctx.lineTo(particles[j].x, particles[j].y);
              ctx.stroke();
            }
          }
        }
        requestAnimationFrame(animate);
      }
      initParticles();
      animate();
    </script>
  </body>
</html>
